int p = 0;
int dir = 1;

void setup() {
  pinMode(13, OUTPUT);
}

void loop() {
  unsigned long t0 = millis();

  while (millis() - t0 < 5) {
    unsigned long e = millis() - t0;

    digitalWrite(13, (e < (unsigned long)(p / 12)) ? HIGH : LOW);
  }

  p += dir;
  if (p >= 255) { p = 255; dir = -1; }
  if (p <= 0)   { p = 0;   dir =  1; }
}
